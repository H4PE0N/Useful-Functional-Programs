
SOURCE_FOLDER_NAME := Test-Program
BINARY_PROGRAM_NAME := program

SOURCE_PROGRAMS_FOLDER := ../../Source-Programs-Folder/$(SOURCE_FOLDER_NAME)
OBJECT_PROGRAMS_FOLDER := ../../Object-Programs-Folder/$(SOURCE_FOLDER_NAME)
BINARY_PROGRAMS_FOLDER := ../../Binary-Programs-Folder/$(SOURCE_FOLDER_NAME)

SOURCE_PROGRAMS_ARRAY := $(wildcard $(SOURCE_PROGRAMS_FOLDER)/*.c)
OBJECT_PROGRAMS_ARRAY := $(patsubst $(SOURCE_PROGRAMS_FOLDER)/%.c, \
$(OBJECT_PROGRAMS_FOLDER)/%.o, $(SOURCE_PROGRAMS_ARRAY))

COMPILOR := gcc
COMPILING_FLAGS := -Wall -Werror

$(BINARY_PROGRAMS_FOLDER)/$(BINARY_PROGRAM_NAME): $(OBJECT_PROGRAMS_ARRAY)
	$(COMPILOR) $(COMPILING_FLAGS) $^ -o $@

$(OBJECT_PROGRAMS_FOLDER)/%.o: $(SOURCE_PROGRAMS_FOLDER)/%.c
	$(COMPILOR) $(COMPILING_FLAGS) $^ -c -o $@
