
SERVER_PROGRAM_NAME := server-socket-program
CLIENT_PROGRAM_NAME := client-socket-program

SERVER_SOURCE_FOLDER := Source-Programs-Folder/Server-Socket-Folder
SERVER_OBJECT_FOLDER := Object-Programs-Folder/Server-Socket-Folder

CLIENT_SOURCE_FOLDER := Source-Programs-Folder/Client-Socket-Folder
CLIENT_OBJECT_FOLDER := Object-Programs-Folder/Client-Socket-Folder

SERVER_SOURCE_ARRAY := $(wildcard $(SERVER_SOURCE_FOLDER)/*.c)
CLIENT_SOURCE_ARRAY := $(wildcard $(CLIENT_SOURCE_FOLDER)/*.c)

SERVER_HEADERS_ARRAY := $(wildcard $(SERVER_SOURCE_FOLDER)/*.h)
CLIENT_HEADERS_ARRAY := $(wildcard $(CLIENT_SOURCE_FOLDER)/*.h)

SERVER_OBJECT_ARRAY := $(patsubst $(SERVER_SOURCE_FOLDER)/%.c, $(SERVER_OBJECT_FOLDER)/%.o, $(SERVER_SOURCE_ARRAY))
CLIENT_OBJECT_ARRAY := $(patsubst $(CLIENT_SOURCE_FOLDER)/%.c, $(CLIENT_OBJECT_FOLDER)/%.o, $(CLIENT_SOURCE_ARRAY))

# THIS IS THE COMPILOR USED TO COMPILE THE EXE:BLE FILE
COMPILING_COMPILOR := gcc
# THESE ARE THE FLAGS USED TO COMPILE THE EXE:BLE  FILE
COMPILING_FLAGS := -Werror
# THIS IS THE COMMAND FOR CREATING A  FOLDER  SOMEWHERE
CREATE_FOLDER := @mkdir

$(SERVER_PROGRAM_NAME): $(SERVER_OBJECT_ARRAY)
	$(COMPILING_COMPILOR) $(COMPILING_FLAGS) $< -o $@

$(CLIENT_PROGRAM_NAME): $(CLIENT_OBJECT_ARRAY)
	$(COMPILING_COMPILOR) $(COMPILING_FLAGS) $< -o $@

$(SERVER_OBJECT_FOLDER)/%.o: $(SERVER_SOURCE_FOLDER)/%.c $(SERVER_OBJECT_FOLDER) $(SERVER_HEADERS_ARRAY)
	$(COMPILING_COMPILOR) $(COMPILING_FLAGS) $< -c -o $@

$(CLIENT_OBJECT_FOLDER)/%.o: $(CLIENT_SOURCE_FOLDER)/%.c $(CLIENT_OBJECT_FOLDER) $(CLIENT_HEADERS_ARRAY)
	$(COMPILING_COMPILOR) $(COMPILING_FLAGS) $< -c -o $@

$(SERVER_OBJECT_FOLDER):; $(CREATE_FOLDER) -p $@

$(CLIENT_OBJECT_FOLDER):; $(CREATE_FOLDER) -p $@
